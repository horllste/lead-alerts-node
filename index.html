<!DOCTYPE html><html><head><title>Instant Lead Alerts</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="//twilio.com/bundles/marketing/img/favicons/favicon.ico"><link rel="apple-touch-icon" href="//twilio.com/bundles/marketing/img/favicons/favicon_57.png"><link rel="apple-touch-icon" sizes="72x72" href="//twilio.com/bundles/marketing/img/favicons/favicon_72.png"><link rel="apple-touch-icon" sizes="114x114" href="//twilio.com/bundles/marketing/img/favicons/favicon_114.png"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div id="viewsaurus" data-title="Instant Lead Alerts"><div class="saurus-panes"><div class="saurus-prose"><div class="saurus-prose-header"><div class="title-outer"><span class="step-title">Instant Lead Alerts</span></div></div><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw fa-list"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>In this tutorial, we will learn how to instantly route leads to sales reps (in a real estate scenario) using text messages. Let's get started!</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><div data-title="Setting Up The Application" class="chapter"><div data-title="What Are We Building?" data-file="views/index.jade" class="step"><h2 id="what-are-we-building-">What Are We Building?</h2>
<p>You probably already have landing pages or product detail views in your web application, which you&#39;re using to generate leads for your sales force. In this tutorial, we&#39;ll use Twilio SMS to send your sales folks text messages right when a new lead comes in.</p>
<p>In this example we&#39;ll be implementing instant lead alerts for real estate (much like <a href="https://www.twilio.com/customers/stories/trulia">our awesome friends at Trulia</a>). We&#39;ll create a landing page for a new house on the market, and notify a real estate agent the moment a potential customer requests information. If you&#39;re not in real estate, don&#39;t worry - the same technique can be used for any business that needs to distribute leads to sales people.</p>
<p>Want to see it in action right away? <a href="https://github.com/TwilioDevEd/lead-alerts-node">Download the code</a> or deploy it to Heroku right now:</p>
<p><a href="https://heroku.com/deploy?template=https://github.com/TwilioDevEd/lead-alerts-node"><img src="https://www.herokucdn.com/deploy/button.png" alt="Deploy"></a></p>
<p>Want to learn how it works? Then let&#39;s build it! Click the next arrow above to continue the tutorial.</p>
</div><div data-title="How It Works" class="step"><h2 id="how-it-works">How It Works</h2>
<p>Here&#39;s how our example app works at a high level:</p>
<p><img src="//s3.amazonaws.com/howtodocs/lead-alerts-flow.png" alt="Lead Alerts Flow"></p>
<ol>
<li>Your customer arrives at a landing page for your product (in this case, a house)</li>
<li>The customer enters their name and contact information into a form to request more information</li>
<li>The sales rep responsible for the product (in this case a real estate agent) receives a text message notifying them of the new lead</li>
</ol>
<p>We&#39;ll step through the implementation of these steps directly in the code. But before we do that, let&#39;s explore the tools and frameworks we&#39;ll use to build this application.</p>
</div><div data-title="About This Application" data-file="index.js" class="step"><h2 id="about-this-application">About This Application</h2>
<p>This is a <a href="http://www.nodejs.org">Node.js</a> web application using the popular <a href="http://www.expressjs.com">Express</a> web framework. To generate HTML on the server, we&#39;ll use the <a href="http://www.jade-lang.com">Jade</a> template engine. This particular use case is pretty simple to implement, so won&#39;t need much more than that! We will, however, make use of the <a href="http://twilio.github.io/twilio-node/">Twilio module for Node.js</a> to make it easier to interact with the Twilio API to actually send out our text messages.</p>
<p>This is the main file of the application. You can start this application by executing <code>node .</code> at the root directory of the example project in the terminal.</p>
<p>We&#39;ll also need to edit a few configuration variables to make our application work - let&#39;s look at those next.</p>
</div><div data-title="Configuring The Application" data-file="config.js" data-highlight="10-25" class="step"><h2 id="configuring-the-application">Configuring The Application</h2>
<p>The application needs to know a few key things before it can run successfully. These config variables will be pulled in from the system environment instead of hard-coded in the file, so we don&#39;t accidentally check these sensitive values (like our Twilio account information) into source control.  Once these config variables are set, our application is ready to run.</p>
<p>Now that we understand how our application is configured and run, let&#39;s start working through the actual implementation, starting with the landing page and form that we display to the customer.</p>
</div></div><div data-title="Displaying the Landing Page" class="chapter"><div data-title="Landing Page Data" data-file="controllers/router.js" data-highlight="7-15" class="step"><h2 id="landing-page-data">Landing Page Data</h2>
<p>To display a landing page for our house, we&#39;ll first need some data about the fictional house we&#39;ve put on the market. For demonstration purposes, we&#39;ve hard-coded a JavaScript object literal containing information we need.</p>
</div><div data-title="Configuring The Route" data-file="controllers/router.js" data-highlight="19-22" class="step"><h2 id="configuring-the-route">Configuring The Route</h2>
<p>Here we create a route handler for the root URL of our application, which will serve as the landing page for our home. We render a Jade template, passing in the data about the house to use inside the template.</p>
<p>Let&#39;s take a look at the Jade code which renders the page.</p>
</div><div data-title="Rendering the Landing Page" data-file="views/index.jade" class="step"><h2 id="rendering-the-landing-page">Rendering the Landing Page</h2>
<p>In our Jade template, we insert data about the house, and in a sidebar include a form for the user to enter in their contact information to request more info about the home.</p>
<p>The form is actually not going to be submitted directly when the button is clicked - we&#39;ll handle that piece via JavaScript to avoid a page refresh. Let&#39;s check out that code next.</p>
</div><div data-title="Submitting the Form" data-file="public/form.js" class="step"><h2 id="submitting-the-form">Submitting the Form</h2>
<p>On our landing page, we include this JavaScript code to intercept the form submission event, and submit the form via Ajax. We do this to avoid a page turn, keeping the user on our landing page.  On either a success or error response from the <code>/leads</code> resource, we show an alert message indicating whether or not the request was received successfully.</p>
<p>Now that we&#39;ve seen how the front end code for our landing page works, let&#39;s see what happens on the server when we send that <code>POST</code> request to <code>/leads</code>.</p>
</div></div><div data-title="Sending the Lead Notification" class="chapter"><div data-title="Creating a Twilio REST API Client" data-file="controllers/router.js" data-highlight="1-5" class="step"><h2 id="creating-a-twilio-rest-api-client">Creating a Twilio REST API Client</h2>
<p>When our server code is initialized, we create an authenticated Twilio REST API client that we can use across all requests to our controller. We initialize it with our Twilio account credentials in the config file we saw earlier.</p>
</div><div data-title="Handling the POST Request" data-file="controllers/router.js" data-highlight="24-46" class="step"><h2 id="handling-the-post-request">Handling the POST Request</h2>
<p>This code handles the HTTP <code>POST</code> request issues by our landing page, and uses the Twilio REST client to send a text message to the real estate agent&#39;s phone number, which is also set in <code>config.js</code>. We include the lead&#39;s name, phone number, and inquiry directly in the body of the text message we send to the agent.</p>
<p>Now the agent has all the information they need to immediately follow up on the lead.</p>
</div><div data-title="All Done!" data-file="controllers/router.js" class="step"><h2 id="all-done-">All Done!</h2>
<p>With just a few lines of code on the server, we&#39;ve enhanced a standard product landing page with instant lead notifications using SMS text messages. Whether your sales team uses iPhones or flip phones, they can follow up with new prospects in minutes.</p>
<p>We hope you enjoyed this tutorial! If you have any questions or feedback, we would like to hear it. Hit us up <a href="https://twitter.com/twilio">@twilio</a> on Twitter, or send a note to <a href="mailto:help@twilio.com">help@twilio.com</a>. We&#39;d love to hear what you&#39;re building.</p>
</div></div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="views/index.jade" data-mode="jade">ZXh0ZW5kcyBsYXlvdXQKCmJsb2NrIGNvbnRlbnQKICAucm93CiAgICAuY29sLXNtLTgKICAgICAgaDE9IHRpdGxlCiAgICAgIGgzPSBwcmljZQogICAgICBwCiAgICAgICAgaW1nLmltZy1yZXNwb25zaXZlKHNyYz0iL2hvdXNlLmpwZyIpCiAgICAgIHA9IGRlc2NyaXB0aW9uCgogICAgLmNvbC1zbS00LmRlbW8KICAgICAgaDQgVGFsayBUbyBBbiBBZ2VudAogICAgICBwLgogICAgICAgIEEgdHJhaW5lZCByZWFsIGVzdGF0ZSBwcm9mZXNzaW9uYWwgaXMgc3RhbmRpbmcgYnkgdG8gYW5zd2VyIGFueQogICAgICAgIHF1ZXN0aW9ucyB5b3UgbWlnaHQgaGF2ZSBhYm91dCB0aGlzIHByb3BlcnR5LiBGaWxsIG91dCB0aGUgZm9ybSBiZWxvdwogICAgICAgIHdpdGggeW91ciBjb250YWN0IGluZm9ybWF0aW9uLCBhbmQgYW4gYWdlbnQgd2lsbCByZWFjaCBvdXQgc29vbi4KCiAgICAgIGZvcm0oYWN0aW9uPScvbGVhZHMnLCBtZXRob2Q9J1BPU1QnKQoKICAgICAgICAuZm9ybS1ncm91cAogICAgICAgICAgbGFiZWwoZm9yPSduYW1lJykgWW91ciBOYW1lCiAgICAgICAgICBpbnB1dC5mb3JtLWNvbnRyb2wodHlwZT0ndGV4dCcsIG5hbWU9J25hbWUnLAogICAgICAgICAgICBwbGFjZWhvbGRlcj0nSm9obiBBcHBsZXNlZWQnKQoKICAgICAgICAuZm9ybS1ncm91cAogICAgICAgICAgbGFiZWwoZm9yPSdwaG9uZScpIFlvdXIgUGhvbmUgTnVtYmVyCiAgICAgICAgICBpbnB1dC5mb3JtLWNvbnRyb2wodHlwZT0ndGV4dCcsIG5hbWU9J3Bob25lJywKICAgICAgICAgICAgcGxhY2Vob2xkZXI9JysxNjUxMjIyOTk4OCcpCgogICAgICAgIC5mb3JtLWdyb3VwCiAgICAgICAgICBsYWJlbChmb3I9J21lc3NhZ2UnKSBIb3cgY2FuIHdlIGhlbHA/CiAgICAgICAgICBpbnB1dC5mb3JtLWNvbnRyb2wodHlwZT0ndGV4dCcsIG5hbWU9J21lc3NhZ2UnLAogICAgICAgICAgICBwbGFjZWhvbGRlcj0nJykgICAgICAgIAoKICAgICAgICBidXR0b24uYnRuLmJ0bi1wcmltYXJ5KHR5cGU9J3N1Ym1pdCcpIFJlcXVlc3QgSW5mbwoKYmxvY2sgc2NyaXB0cwogIHNjcmlwdChzcmM9J2Zvcm0uanMnKQ==</textarea>
<textarea class="saurus-file" data-file="index.js" data-mode="javascript">dmFyIGh0dHAgPSByZXF1aXJlKCdodHRwJyk7CnZhciBjb25maWcgPSByZXF1aXJlKCcuL2NvbmZpZycpOwoKLy8gQ3JlYXRlIEV4cHJlc3Mgd2ViIGFwcAp2YXIgYXBwID0gcmVxdWlyZSgnLi93ZWJhcHAnKTsKCi8vIENyZWF0ZSBhbiBIVFRQIHNlcnZlciBhbmQgbGlzdGVuIG9uIHRoZSBjb25maWd1cmVkIHBvcnQKdmFyIHNlcnZlciA9IGh0dHAuY3JlYXRlU2VydmVyKGFwcCk7CnNlcnZlci5saXN0ZW4oY29uZmlnLnBvcnQsIGZ1bmN0aW9uKCkgewogICAgY29uc29sZS5sb2coJ0V4cHJlc3Mgc2VydmVyIGxpc3RlbmluZyBvbiAqOicgKyBjb25maWcucG9ydCk7Cn0pOw==</textarea>
<textarea class="saurus-file" data-file="config.js" data-mode="javascript">dmFyIGNmZyA9IHt9OwoKLy8gSFRUUCBQb3J0IHRvIHJ1biBvdXIgd2ViIGFwcGxpY2F0aW9uCmNmZy5wb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAwOwoKLy8gQSByYW5kb20gc3RyaW5nIHRoYXQgd2lsbCBoZWxwIGdlbmVyYXRlIHNlY3VyZSBvbmUtdGltZSBwYXNzd29yZHMgYW5kCi8vIEhUVFAgc2Vzc2lvbnMKY2ZnLnNlY3JldCA9IHByb2Nlc3MuZW52LkFQUF9TRUNSRVQgfHwgJ2tleWJvYXJkIGNhdCc7CgovLyBZb3VyIFR3aWxpbyBhY2NvdW50IFNJRCBhbmQgYXV0aCB0b2tlbiwgYm90aCBmb3VuZCBhdDoKLy8gaHR0cHM6Ly93d3cudHdpbGlvLmNvbS91c2VyL2FjY291bnQKLy8gCi8vIEEgZ29vZCBwcmFjdGljZSBpcyB0byBzdG9yZSB0aGVzZSBzdHJpbmcgdmFsdWVzIGFzIHN5c3RlbSBlbnZpcm9ubWVudAovLyB2YXJpYWJsZXMsIGFuZCBsb2FkIHRoZW0gZnJvbSB0aGVyZSBhcyB3ZSBhcmUgZG9pbmcgYmVsb3cuIEFsdGVybmF0ZWx5LAovLyB5b3UgY291bGQgaGFyZCBjb2RlIHRoZXNlIHZhbHVlcyBoZXJlIGFzIHN0cmluZ3MuCmNmZy5hY2NvdW50U2lkID0gcHJvY2Vzcy5lbnYuVFdJTElPX0FDQ09VTlRfU0lEOwpjZmcuYXV0aFRva2VuID0gcHJvY2Vzcy5lbnYuVFdJTElPX0FVVEhfVE9LRU47CgovLyBBIFR3aWxpbyBudW1iZXIgeW91IGNvbnRyb2wgLSBjaG9vc2Ugb25lIGZyb206Ci8vIGh0dHBzOi8vd3d3LnR3aWxpby5jb20vdXNlci9hY2NvdW50L3Bob25lLW51bWJlcnMvaW5jb21pbmcKLy8gU3BlY2lmeSBpbiBFLjE2NCBmb3JtYXQsIGUuZy4gIisxNjUxOTk5ODg3NyIKY2ZnLnR3aWxpb051bWJlciA9IHByb2Nlc3MuZW52LlRXSUxJT19OVU1CRVI7CgovLyBUaGUgc2FsZXMgcmVwIC8gYWdlbnQncyBwaG9uZSBudW1iZXIKY2ZnLmFnZW50TnVtYmVyID0gcHJvY2Vzcy5lbnYuQUdFTlRfTlVNQkVSOwoKLy8gRXhwb3J0IGNvbmZpZ3VyYXRpb24gb2JqZWN0Cm1vZHVsZS5leHBvcnRzID0gY2ZnOw==</textarea>
<textarea class="saurus-file" data-file="controllers/router.js" data-mode="javascript">dmFyIHR3aWxpbyA9IHJlcXVpcmUoJ3R3aWxpbycpOwp2YXIgY29uZmlnID0gcmVxdWlyZSgnLi4vY29uZmlnJyk7CgovLyBDcmVhdGUgYW4gYXV0aGVudGljYXRlZCBUd2lsaW8gQVBJIGNsaWVudAp2YXIgY2xpZW50ID0gdHdpbGlvKGNvbmZpZy5hY2NvdW50U2lkLCBjb25maWcuYXV0aFRva2VuKTsKCi8vIFNvbWUgaGFyZC1jb2RlZCBpbmZvcm1hdGlvbiBhYm91dCBhIGhvdXNlCnZhciBob3VzZSA9IHsKICAgIHRpdGxlOiAnNTU1IFN1bm55YnJvb2sgTGFuZScsCiAgICBwcmljZTogJyQzNDksOTk5JywKICAgIGRlc2NyaXB0aW9uOiAnWW91IGFuZCB5b3VyIGZhbWlseSB3aWxsIGxvdmUgdGhpcyBjaGFybWluZyBob21lLiAnCiAgICAgICAgKyAnRmVhdHVyaW5nIGdyYW5pdGUgYXBwbGlhbmNlcywgc3RhaW5sZXNzIHN0ZWVsIHdpbmRvd3MsIGFuZCAnCiAgICAgICAgKyAnaGlnaCBlZmZpY2llbmN5IGR1YWwgbXVkIHJvb21zLCB0aGlzIGpvaW50IGlzIGxvYWRlZCB0byB0aGUgbWF4LiAnCiAgICAgICAgKyAnTW90aXZhdGVkIHNlbGxlcnMgaGF2ZSBwcmljZWQgZm9yIGEgcXVpY2sgc2FsZSwgYWN0IG5vdyEnCn07CgovLyBNYXAgcm91dGVzIHRvIGNvbnRyb2xsZXIgZnVuY3Rpb25zCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXBwKSB7CiAgICAvLyBSZW5kZXIgbGFuZGluZyBwYWdlCiAgICBhcHAuZ2V0KCcvJywgZnVuY3Rpb24ocmVxdWVzdCwgcmVzcG9uc2UpIHsKICAgICAgICByZXNwb25zZS5yZW5kZXIoJ2luZGV4JywgaG91c2UpOwogICAgfSk7CgogICAgLy8gU2VuZCBsZWFkIG5vdGlmaWNhdGlvbgogICAgYXBwLnBvc3QoJy9sZWFkcycsIGZ1bmN0aW9uKHJlcXVlc3QsIHJlc3BvbnNlKSB7CiAgICAgICAgLy8gQXNzZW1ibGUgYSB0ZXh0IG1lc3NhZ2UgYm9keSAKICAgICAgICB2YXIgbWVzc2FnZSA9ICdOZXcgbGVhZCByZWNlaXZlZCBmb3IgJyArIGhvdXNlLnRpdGxlICsgJy4gQ2FsbCAnIAogICAgICAgICAgICArIHJlcXVlc3QuYm9keS5uYW1lICsgJyBhdCAnICsgcmVxdWVzdC5ib2R5LnBob25lICsgJy4gTWVzc2FnZTogIicKICAgICAgICAgICAgKyByZXF1ZXN0LmJvZHkubWVzc2FnZSArICciJzsKCiAgICAgICAgLy8gU2VuZCBsZWFkIG5vdGlmaWNhdGlvbiB0byBhZ2VudAogICAgICAgIGNsaWVudC5zZW5kTWVzc2FnZSh7CiAgICAgICAgICAgIHRvOiBjb25maWcuYWdlbnROdW1iZXIsCiAgICAgICAgICAgIGZyb206IGNvbmZpZy50d2lsaW9OdW1iZXIsCiAgICAgICAgICAgIGJvZHk6IG1lc3NhZ2UKICAgICAgICB9LCBmdW5jdGlvbihlcnIsIGRhdGEpIHsKICAgICAgICAgICAgLy8gUmV0dXJuIGEgNTAwIGlmIHRoZXJlIHdhcyBhbiBlcnJvciBvbiBUd2lsaW8ncyBlbmQKICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cyg1MDApLnNlbmQoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCByZXNwb25kIHdpdGggMjAwIE9LCiAgICAgICAgICAgIHJlc3BvbnNlLnN0YXR1cygyMDApLnNlbmQoJycpOwogICAgICAgIH0pOwogICAgfSk7Cn07</textarea>
<textarea class="saurus-file" data-file="public/form.js" data-mode="javascript">JChmdW5jdGlvbigpIHsKICAgICQoJ2Zvcm0nKS5vbignc3VibWl0JywgZnVuY3Rpb24oZSkgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKCiAgICAgICAgLy8gU3VibWl0IGZvcm0gdmlhIEFqYXgKICAgICAgICAkLmFqYXgoewogICAgICAgICAgICB1cmw6ICQodGhpcykuYXR0cignYWN0aW9uJyksCiAgICAgICAgICAgIG1ldGhvZDogJCh0aGlzKS5hdHRyKCdtZXRob2QnKSwKICAgICAgICAgICAgZGF0YTogJCh0aGlzKS5zZXJpYWxpemUoKQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGFsZXJ0KCdUaGFua3MhIEFuIGFnZW50IHdpbGwgYmUgY29udGFjdGluZyB5b3Ugc2hvcnRseS4nKTsKICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKCkgewogICAgICAgICAgICBhbGVydCgnT29wcyEgVGhlcmUgd2FzIGFuIGVycm9yLiBQbGVhc2UgdHJ5IGFnYWluLicpOwogICAgICAgIH0pOwogICAgfSk7Cn0pOw==</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div></div></div></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="viewsaurus.js"></script></body></html>